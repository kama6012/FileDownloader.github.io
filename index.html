<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <title>Download Sample</title>
    </head>
    <body>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>      
        <script type="text/javascript" src="js/zip.min.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
      <script type='text/javascript'>
        function handleDownload() {
          var zip = new Zlib.Zip();
          var plainData = JSON.stringify(getJsonObj());
          zip.addFile(strToUtf8Array(plainData), {
              filename: strToUtf8Array('sample/sample001.json')
          });
          var compressData = zip.compress();

          var blob = new Blob([compressData], { 'type': 'application/zip' });

            if (window.navigator.msSaveBlob) { 
                window.navigator.msSaveBlob(blob, "test.zip"); 

                // msSaveOrOpenBlobの場合はファイルを保存せずに開ける
                window.navigator.msSaveOrOpenBlob(blob, "test.zip"); 
            } else {
                document.getElementById("download").href = window.URL.createObjectURL(blob);
            }
        }
      </script>
      <a id="download" href="#" download="test.zip" onclick="handleDownload()">ダウンロード</a>
    </body>
</html>